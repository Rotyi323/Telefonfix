<div class="ticket-container">
  <h2>
    {{ editingTicketId ? "Hibajegy szerkeszt√©se" : "Hibajegy bek√ºld√©se" }}
  </h2>

  <form [formGroup]="ticketForm" (ngSubmit)="submitTicket()">
    <mat-form-field class="full-width" appearance="outline">
      <mat-label>N√©v</mat-label>
      <input matInput formControlName="name" />
    </mat-form-field>

    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput formControlName="email" />
    </mat-form-field>

    <mat-form-field class="full-width" appearance="outline">
      <mat-label>Hiba le√≠r√°sa</mat-label>
      <textarea matInput formControlName="message" rows="4"></textarea>
    </mat-form-field>

    <mat-form-field class="full-width" appearance="outline">
      <mat-label>√ârintett k√©sz√ºl√©k</mat-label>
      <mat-select formControlName="productId">
        <mat-option *ngFor="let product of products" [value]="product.id">
          {{ product.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="!ticketForm.valid"
    >
      {{ editingTicketId ? "Ment√©s" : "K√ºld√©s" }}
    </button>
    <button
      mat-button
      type="button"
      color="warn"
      *ngIf="editingTicketId"
      (click)="resetForm()"
    >
      M√©gse
    </button>
  </form>

  <div style="margin-top: 32px">
    <h3>Bek√ºld√∂tt hibajegyek</h3>
    <mat-card *ngFor="let ticket of tickets" style="margin-bottom: 12px">
      <mat-card-title>
        {{ ticket.name }} ({{ ticket.email }}) ‚Äì üì±
        {{ getProductName(ticket.productId) }}
      </mat-card-title>
      <mat-card-content>
        <p>{{ ticket.message }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button color="primary" (click)="editTicket(ticket)">
          Szerkeszt√©s
        </button>
        <button mat-button color="warn" (click)="deleteTicket(ticket.id!)">
          T√∂rl√©s
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
